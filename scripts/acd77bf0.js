document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#z"),t=$.qs("#ie"),c=$.qs("#iy"),o=$.qs("#ig"),r=$.qs("#ti"),n=$.qs("#ib"),s=$.qs("#t"),a=$.qs("#tr"),l=$.qs("#rf"),u=$.qs("#k");function i(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,c=e%100;return 1===t&&11!==c?"st_conflict":2===t&&12!==c?"nd_conflict":3===t&&13!==c?"rd_conflict":"th"})();return`${e}${t}`}function d(){const e=$.qs(".hl");let t=i(e.children.length+1);const c=$.qs(".hc").cloneNode(!0),o=c.querySelector(".stockavgcal__purchase-heading"),r=document.createElement("img");r.classList.add("stockavgcal__purchase-remove"),r.setAttribute("src","/assets/images/a6d3e123.svg"),o.textContent=`${t} Purchase`,o.after(r),r.addEventListener("click",(()=>{e.removeChild(c),function(){const e=$.qsa(".hc");for(let t=0;t<e.length;t++){const c=e[t],o=c.querySelector(".stockavgcal__purchase-heading");let r=i(t+1);o.textContent=`${r} Purchase`,r=r.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${r}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${r}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${r}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${r}-quantity`}}(),y()})),t=t.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${t}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${t}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${t}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${t}-quantity`,c.querySelector(".stockavgcal__purchase-buy-price").value=0,c.querySelector(".stockavgcal__purchase-quantity").value=0,e.appendChild(c)}function h(e){const t=$.qsa(".stockavgcal__preferred-currency");for(let c=0;c<t.length;c++){t[c].textContent=e}}function y(){const e=$.qsa(".hc");let s=0,l=0;for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity"),o=parseFloat(e.value||0),r=parseFloat(c.value||0);s+=r,l+=o*r}const u=Number((s>0?l/s:0).toFixed(2)).toLocaleString(),i=Number(s.toFixed(2)).toLocaleString(),d=Number(l.toFixed(2)).toLocaleString();t.textContent=u,c.textContent=i,o.textContent=d;const h=parseFloat(a.value||0);if(h>0&&s>0){const e=h*s-l,t=e/l*100;r.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,r.classList.toggle("in-profit",e>0),r.classList.toggle("in-loss",e<0),n.classList.toggle("in-profit",t>0),n.classList.toggle("in-loss",t<0),r.closest(".hb").classList.remove("np"),n.closest(".hb").classList.remove("np")}else r.closest(".hb").classList.add("np"),n.closest(".hb").classList.add("np")}$.qs("#j").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tc").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),h(t)})),s.addEventListener("click",(()=>{d()})),u.addEventListener("click",(()=>{y()})),l.addEventListener("click",(()=>{!function(){const e=$.qsa(".hc");for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity");e.value=0,c.value=0}t.textContent=0,c.textContent=0,o.textContent=0,a.value=0,r.closest(".hb").classList.add("np"),n.closest(".hb").classList.add("np")}()}));const i=sessionStorage.getItem("currency-preference");i&&(e.value=i,h(i))}()}));
document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#z"),t=$.qs("#it"),c=$.qs("#ib"),o=$.qs("#iy"),r=$.qs("#ti"),l=$.qs("#iw"),a=$.qs("#t"),n=$.qs("#tr"),s=$.qs("#tc"),u=$.qs(".hk"),i=$.qs("#rl"),d=$.qs("#k");function v(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,c=e%100;return 1===t&&11!==c?"st_conflict":2===t&&12!==c?"nd_conflict":3===t&&13!==c?"rd_conflict":"th"})();return`${e}${t}`}function y(){const e=$.qs(".hl");let t=v(e.children.length+1);const c=$.qs(".hc").cloneNode(!0),o=c.querySelector(".stockavgcal__purchase-heading"),r=document.createElement("img");r.classList.add("stockavgcal__purchase-remove"),r.setAttribute("src","/assets/images/a6d3e123.svg"),o.textContent=`${t} Purchase`,o.after(r),r.addEventListener("click",(()=>{e.removeChild(c),function(){const e=$.qsa(".hc");for(let t=0;t<e.length;t++){const c=e[t],o=c.querySelector(".stockavgcal__purchase-heading");let r=v(t+1);o.textContent=`${r} Purchase`,r=r.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${r}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${r}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${r}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${r}-quantity`}}(),g()})),t=t.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${t}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${t}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${t}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${t}-quantity`,c.querySelector(".stockavgcal__purchase-buy-price").value=0,c.querySelector(".stockavgcal__purchase-quantity").value=0,e.appendChild(c)}function _(e){const t=$.qsa(".stockavgcal__preferred-currency");for(let c=0;c<t.length;c++){t[c].textContent=e}}function g(){const e=$.qsa(".hc");let a=0,i=0;const d=[];for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity"),o=parseFloat(e.value||0),r=parseFloat(c.value||0);a+=r,i+=o*r,d.push({buyPrice:o,quantity:r,invested:(o*r).toFixed(2)})}if(!i||!a)return;const v=Number((a>0?i/a:0).toFixed(2)).toLocaleString(),y=Number(a.toFixed(2)).toLocaleString(),_=Number(i.toFixed(2)).toLocaleString();t.textContent=v,c.textContent=y,o.textContent=_;const g=parseFloat(n.value||0);if(g>0&&a>0){const e=g*a-i,t=e/i*100;r.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,l.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,r.classList.toggle("in-profit",e>0),r.classList.toggle("in-loss",e<0),l.classList.toggle("in-profit",t>0),l.classList.toggle("in-loss",t<0),r.closest(".hb").classList.remove("np"),l.closest(".hb").classList.remove("np")}else r.closest(".hb").classList.add("np"),l.closest(".hb").classList.add("np");const S=u.querySelector(".stockavgcal__table-header"),q=u.querySelectorAll(".stockavgcal__table-row");for(let e=1;e<q.length;e++)q[e].remove();let h=0;const p=q[0];for(let e=0;e<d.length;e++){const t=d[e],c=p.cloneNode(!0);let o=0;if(e===d.length-1?o=Number((100-h).toFixed(2)):i>0&&(o=(t.invested/i*100).toFixed(2),h+=Number(o)),c.querySelector(".stockavgcal__buy-price-value").textContent=t.buyPrice.toLocaleString(),c.querySelector(".stockavgcal__quantity-value").textContent=t.quantity.toLocaleString(),c.querySelector(".stockavgcal__invested-value").textContent=Number(t.invested).toLocaleString(),c.querySelector(".stockavgcal__allocation-value").textContent=`${Number(o)}%`,g>0){const e=(g*t.quantity).toFixed(2),o=(e-t.invested).toFixed(2),r=(o/t.invested*100).toFixed(2);S.querySelector(".stockavgcal__current-column").classList.remove("np"),S.querySelector(".stockavgcal__pl-column").classList.remove("np"),S.querySelector(".stockavgcal__net-change-column").classList.remove("np"),c.querySelector(".stockavgcal__current-value").classList.remove("np"),c.querySelector(".stockavgcal__pl-value").classList.remove("np"),c.querySelector(".stockavgcal__net-change-value").classList.remove("np"),c.querySelector(".stockavgcal__current-value").textContent=Number(e).toLocaleString(),c.querySelector(".stockavgcal__pl-value").textContent=`${o>=0?"+":""}${Number(o).toLocaleString()}`,c.querySelector(".stockavgcal__net-change-value").textContent=`${r>=0?"+":""}${Number(r).toLocaleString()}%`}else S.querySelector(".stockavgcal__current-column").classList.add("np"),S.querySelector(".stockavgcal__pl-column").classList.add("np"),S.querySelector(".stockavgcal__net-change-column").classList.add("np"),c.querySelector(".stockavgcal__current-value").classList.add("np"),c.querySelector(".stockavgcal__pl-value").classList.add("np"),c.querySelector(".stockavgcal__net-change-value").classList.add("np");u.appendChild(c)}p.remove(),s.classList.remove("np")}$.qs("#j").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#th").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),_(t)})),a.addEventListener("click",(()=>{y()})),d.addEventListener("click",(()=>{g()})),i.addEventListener("click",(()=>{!function(){const e=$.qsa(".hc");for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity");e.value=0,c.value=0}t.textContent=0,c.textContent=0,o.textContent=0,n.value=0,r.closest(".hb").classList.add("np"),l.closest(".hb").classList.add("np"),s.classList.add("np");const a=u.querySelectorAll(".stockavgcal__table-row");for(let e=1;e<a.length;e++)a[e].remove()}()}));const v=sessionStorage.getItem("currency-preference");v&&(e.value=v,_(v))}()}));
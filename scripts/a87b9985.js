document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#z"),t=$.qs("#rq"),c=$.qs("#im"),r=$.qs("#iv"),o=$.qs("#t"),n=$.qs("#ru"),a=$.qs("#k");function u(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,c=e%100;return 1===t&&11!==c?"st_conflict":2===t&&12!==c?"nd_conflict":3===t&&13!==c?"rd_conflict":"th"})();return`${e}${t}`}function l(){const e=$.qs(".hl");let t=u(e.children.length+1);const c=$.qs(".hc").cloneNode(!0),r=c.querySelector(".stockavgcal__purchase-heading"),o=document.createElement("img");o.classList.add("stockavgcal__purchase-remove"),o.setAttribute("src","/assets/images/a6d3e123.svg"),r.textContent=`${t} Purchase`,r.after(o),o.addEventListener("click",(()=>{e.removeChild(c),function(){const e=$.qsa(".hc");for(let t=0;t<e.length;t++){const c=e[t],r=c.querySelector(".stockavgcal__purchase-heading");let o=u(t+1);r.textContent=`${o} Purchase`,o=o.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${o}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${o}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${o}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${o}-quantity`}}(),i()})),t=t.toLowerCase(),c.querySelector(".stockavgcal__purchase-label--buy-price").setAttribute("for",`${t}-purchase`),c.querySelector(".stockavgcal__purchase-buy-price").id=`${t}-purchase`,c.querySelector(".stockavgcal__purchase-label--quantity").setAttribute("for",`${t}-quantity`),c.querySelector(".stockavgcal__purchase-quantity").id=`${t}-quantity`,c.querySelector(".stockavgcal__purchase-buy-price").value=0,c.querySelector(".stockavgcal__purchase-quantity").value=0,e.appendChild(c)}function s(e){const t=$.qsa(".stockavgcal__preferred-currency");for(let c=0;c<t.length;c++){t[c].textContent=e}}function i(){const e=$.qsa(".hc");let o=0,n=0;for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity"),r=parseFloat(e.value||0),a=parseFloat(c.value||0);o+=a,n+=r*a}let a=o>0?n/o:0;t.textContent=Number(a.toFixed(2)).toLocaleString(),c.textContent=Number(o.toFixed(2)).toLocaleString(),r.textContent=Number(n.toFixed(2)).toLocaleString()}$.qs("#j").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tf").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),s(t)})),o.addEventListener("click",(()=>{l()})),a.addEventListener("click",(()=>{i()})),n.addEventListener("click",(()=>{!function(){const e=$.qsa(".hc");for(const t of e){const e=t.querySelector(".stockavgcal__purchase-buy-price"),c=t.querySelector(".stockavgcal__purchase-quantity");e.value=0,c.value=0}t.textContent=0,c.textContent=0,r.textContent=0}()}));const u=sessionStorage.getItem("currency-preference");u&&(e.value=u,s(u))}()}));